<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Donazione libri Biblioteca Elsa Morante di Ostia Municipio Roma X">
    <title>Modulo donazione</title>
    <link rel="icon" href="favicon.png" type="image/png">
    
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">

    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js"></script>
</head>

<body>
    <div class="top-banner">
        <a href="https://culture.roma.it/" target="_blank" title="Questo link si apre in una nuova finestra">
            <img src="roma.png" alt="Logo Roma" class="roma-logo">
        </a>
        <div class="social-icons">
            <a href="https://www.bibliotechediroma.it/opac" target="_blank" title="Cerca nel catalogo delle biblioteche di Roma">
                <img src="search.svg" alt="Cerca" class="icon-svg">
            </a>
            <a href="https://www.facebook.com/biblioteca.elsamorante?locale=it_IT" target="_blank"><i class="fab fa-facebook"></i></a>
            <a href="https://www.instagram.com/bibliotecaelsamorante/" target="_blank"><i class="fab fa-instagram"></i></a>
            <a href="https://x.com/bibliomorante" target="_blank"><i class="fab fa-x-twitter"></i></a>
            <a href="https://www.youtube.com/@bibliotecaelsamorante1172/featured" target="_blank"><i class="fab fa-youtube"></i></a>
        </div>
    </div>

    <header>
        <div class="container-header">
            <a href="https://www.bibliotechediroma.it/opac/.do">
                <img src="logobianco.png" alt="Logo Biblioteche di Roma" class="logo-white">
            </a>
            <a href="https://www.bibliotechediroma.it/opac/library/Biblioteca%20Elsa%20Morante/RMBO2">
                <img src="logomorante.png" alt="Logo Biblioteca Morante" class="logo-morante">
            </a>
        </div>
    </header>

    <div class="content-wrapper">
        <div class="nav-icons">
            <a href="https://www.bibliotechediroma.it/opac/news/donazioni/33158" title="Indietro">
                <img src="left.svg" alt="Indietro" class="icon-nav">
            </a>
            <a href="https://www.bibliotechediroma.it/opac/.do" title="Home">
                <img src="home.svg" alt="Home" class="icon-nav">
            </a>
        </div>

        <div class="max-w-4xl mx-auto bg-white p-8 rounded-lg mt-2">
            <div class="title-container">
                <div class="flex items-center gap-2 mb-3">
                    <a href="https://bibliotecamorante.github.io/mappa/" target="_blank" title="Visualizza la posizione sulla mappa">
                        <img alt="Posizione" src="location.svg" class="location-icon icon-small">
                    </a>
                    <a href="https://www.bibliotechediroma.it/opac/library/Biblioteca%20Elsa%20Morante/RMBO2" target="_blank" class="biblioteca-link" title="Clicca qui per vedere gli appuntamenti della biblioteca">
                        Biblioteca Elsa Morante
                    </a>
                </div>
                <h1 class="main-title">Donazione di libri</h1>
            </div>
        </div>

        <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded-r">
            Compila il modulo per donare i tuoi libri alla biblioteca. I campi contrassegnati con <span class="required-asterisk">*</span> sono obbligatori.
        </div>

        <form id="donationForm" novalidate>
            
            <h3 class="section-header">Dati Personali</h3>

            <div class="mb-5">
                <label for="nome" class="block mb-1 text-slate-700 font-medium">Nome<span class="required-asterisk">*</span></label>
                <input type="text" id="nome" name="nome" required class="w-full form-input">
                <p class="hidden error-message text-sm text-red-500 mt-1">Il nome è obbligatorio</p>
            </div>

            <div class="mb-5">
                <label for="cognome" class="block mb-1 text-slate-700 font-medium">Cognome<span class="required-asterisk">*</span></label>
                <input type="text" id="cognome" name="cognome" required class="w-full form-input">
                <p class="hidden error-message text-sm text-red-500 mt-1">Il cognome è obbligatorio</p>
            </div>

            <div class="mb-5">
                <label for="tessera" class="block mb-1 text-slate-700 font-medium">Numero Tessera</label>
                <input type="text" id="tessera" name="tessera" class="w-full form-input">
            </div>

            <div class="mb-5">
                <label for="telefono" class="block mb-1 text-slate-700 font-medium">Telefono</label>
                <input type="tel" id="telefono" name="telefono" class="w-full form-input">
                <p class="hidden error-message text-sm text-red-500 mt-1">Il numero di telefono deve contenere solo numeri (da 6 a 15 cifre)</p>
            </div>

            <div class="mb-5">
                <label for="email" class="block mb-1 text-slate-700 font-medium">Email<span class="required-asterisk">*</span></label>
                <input type="email" id="email" name="email" required class="w-full form-input">
                <p class="hidden error-message text-sm text-red-500 mt-1">Inserire un indirizzo email valido</p>
            </div>

            <h3 class="section-header">Libri da donare</h3>

            <div id="bookList">
                </div>

            <div class="mb-5 bg-gray-50 p-4 rounded">
                <div class="flex justify-between items-center mb-1">
                    <label for="notes" class="block text-slate-700 font-medium text-sm">Note aggiuntive</label>
                    <span id="charCount" class="text-sm text-gray-500">500 caratteri rimanenti</span>
                </div>
                <textarea id="notes" name="notes" rows="3" maxlength="500" class="w-full form-input bg-white notes-area" placeholder="Aggiungi eventuali note o commenti sulla donazione..."></textarea>
            </div>

            <div class="bg-gray-50 p-4 rounded mb-5">
                <label class="flex items-start gap-3 checkbox-label">
                    <input type="checkbox" id="accept" name="accept" required class="mt-1">
                    <span>Ho letto e accetto <a href="termini.html" target="_blank" class="text-blue-500 underline">termini e condizioni</a></span>
                </label>
                <p class="hidden error-message text-sm text-red-500 mt-1">Devi accettare i termini e le condizioni</p>
            </div>

            <button type="submit" class="submit-btn">
                Invia Donazione
            </button>
        </form>
    </div>

    <template id="book-entry-template">
        <div class="book-entry relative bg-gray-50 border border-gray-200 rounded-lg p-5 mb-5">
            <div class="flex justify-between items-center mb-4">
                <span class="book-counter">1</span>
                <div class="flex gap-2 action-buttons">
                    <button type="button" class="btn-action btn-duplicate text-green-500" title="Duplica libro">
                        <i class="fas fa-copy"></i>
                    </button>
                    <button type="button" class="btn-action btn-reset text-blue-500" title="Azzera campi">
                        <i class="fas fa-undo"></i>
                    </button>
                    <button type="button" class="btn-action btn-remove text-red-500" title="Rimuovi libro">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>

            <div class="mb-5 search-section">
                <div class="flex items-center gap-2 mb-2">
                    <label class="flex items-center gap-2">
                        <i class="fas fa-book-open text-lg text-blue-600"></i>
                        <span class="text-blue-600 font-medium">
                            Search as you type <span class="text-gray-500 text-sm font-normal">(opzionale)</span>
                        </span>
                        <span class="group relative cursor-help">
                            <i class="fas fa-info-circle text-gray-500"></i>
                            <div class="tooltip group-hover-visible">
                                Cerca, seleziona e... boom! La scheda si completa al volo!
                            </div>
                        </span>
                    </label>
                </div>
                <div class="flex gap-2 relative">
                    <input type="text" class="quick-search w-full px-3 py-2 border-2 border-gray-300 rounded-l text-base" placeholder="Cerca per titolo, autore o ISBN...">
                    <button type="button" class="search-btn px-4 rounded-r text-white bg-blue-500 hover:bg-blue-600">
                        <i class="fas fa-search"></i>
                    </button>
                    <div class="search-spinner absolute right-12 top-2 hidden">
                        <i class="fas fa-circle-notch fa-spin text-blue-500"></i>
                    </div>
                </div>
                <div class="search-results hidden mt-2 bg-white border border-gray-200 rounded-lg shadow-md max-h-60 overflow-y-auto"></div>
            </div>

            <div class="mb-5">
                <label class="block mb-1 text-slate-700 font-medium">Titolo<span class="required-asterisk">*</span></label>
                <input type="text" class="book-title w-full form-input" required>
                <p class="hidden error-message text-sm text-red-500 mt-1">Il titolo è obbligatorio</p>
            </div>

            <div class="mb-5">
                <label class="block mb-1 text-slate-700 font-medium">Autore</label>
                <input type="text" class="book-author w-full form-input">
            </div>

            <div class="mb-5">
                <label class="block mb-1 text-slate-700 font-medium">Editore</label>
                <input type="text" class="book-publisher w-full form-input">
            </div>

            <div class="mb-5">
                <label class="block mb-1 text-slate-700 font-medium">Anno</label>
                <input type="number" min="1400" max="2024" class="book-year w-full form-input">
                <p class="hidden error-message text-sm text-red-500 mt-1">Anno non valido</p>
            </div>

            <div class="mb-5">
                <div class="flex items-center gap-1">
                    <label class="block text-slate-700 font-medium">ISBN <span class="text-gray-500 font-normal">(raccomandato)</span></label>
                    <div class="relative group -mt-1">
                        <i class="fa-solid fa-circle-info text-gray-500 text-sm cursor-help"></i>
                        <div class="tooltip group-hover-visible w-64">
                            Lo trovi sul retro del libro sopra al codice a barre o nella pagina del copyright.
                        </div>
                    </div>
                </div>
                <div class="flex gap-2">
                    <input type="tel" inputmode="numeric" class="book-isbn w-full form-input" maxlength="13" placeholder="Inserisci 10 o 13 cifre">
                    <button type="button" class="scan-isbn-btn px-4 py-2 rounded text-white flex items-center gap-2 bg-green-500 hover:bg-green-600" title="Scansiona codice a barre">
                        <i class="fas fa-barcode"></i>
                        <span class="hidden sm:inline">Scansiona</span>
                    </button>
                </div>
                <p class="hidden error-message text-sm text-red-500 mt-1">ISBN non valido</p>
                
                <div class="isbn-scanner-modal hidden fixed inset-0 bg-black/75 z-50 flex items-center justify-center p-4">
                    <div class="bg-white rounded-lg p-6 w-full max-w-md relative">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-slate-700">Scansiona codice a barre</h3>
                            <button type="button" class="close-scanner text-gray-500 text-2xl hover:text-red-500">&times;</button>
                        </div>
                        <div class="isbn-scanner-reader w-full bg-black rounded overflow-hidden min-h-[300px] relative"></div>
                        <p class="text-sm text-gray-600 mt-3 text-center">Inquadra il codice a barre del libro</p>
                    </div>
                </div>
            </div>

            <button type="button" class="add-book-btn">+ Aggiungi Libro</button>
        </div>
    </template>

    <footer>
        <div class="container footer-container">
            <div class="mb-4">
                <img src="footermorante.png" alt="Logo Biblioteca Morante" class="footer-logo" onclick="window.open('https://www.bibliotechediroma.it/opac/library/Biblioteca%20Elsa%20Morante/RMBO2', '_blank');">
            </div>
            <div class="footer-info">
                <div class="flex items-center gap-2">
                    <a href="https://bibliotecamorante.github.io/mappa/" target="_blank" class="footer-link">
                        <i class="fas fa-location-dot w-4"></i>
                        <span class="flex flex-col">
                            <span>Porto turistico di Roma</span>
                            <span>Municipio X, 00121 Roma</span>
                        </span>
                    </a>
                </div>
                <div class="flex items-center gap-4">
                    <div class="flex items-center gap-2">
                        <i class="fas fa-phone w-4"></i>
                        <span>
                            <a href="tel:+390645460481">06 4546 0481</a> / 
                            <a href="tel:+390645460483">0483</a>
                        </span>
                    </div>
                    <div class="flex items-center gap-2">
                        <i class="fas fa-clock w-4"></i>
                        <span class="flex flex-col">
                            <span>Lun-Ven 09:00-19:00</span>
                            <span>Sab 09:00-13:00</span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script type="module" src="script.js"></script>
</body>
</html>
